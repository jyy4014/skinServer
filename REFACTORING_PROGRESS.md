# ğŸ”§ ë¦¬íŒ©í† ë§ ì§„í–‰ ìƒí™©

## âœ… ì™„ë£Œëœ ì‘ì—…

### ìš°ì„ ìˆœìœ„ 1: í•µì‹¬ ì¸í”„ë¼ ëª¨ë“ˆí™” (ì™„ë£Œ)

#### 1. API í´ë¼ì´ì–¸íŠ¸ í†µí•© ëª¨ë“ˆ (`lib/api/`)
- âœ… `createApiClient()` - ê¸°ë³¸ HTTP í´ë¼ì´ì–¸íŠ¸
- âœ… `callEdgeFunction()` - Edge Function í˜¸ì¶œ í—¬í¼
- âœ… `createEdgeFunctionClient()` - Edge Functions ì „ìš© í´ë¼ì´ì–¸íŠ¸
- âœ… `analyze()`, `save()` ë©”ì„œë“œ êµ¬í˜„
- âœ… **í…ŒìŠ¤íŠ¸**: 9ê°œ í…ŒìŠ¤íŠ¸ ëª¨ë‘ í†µê³¼
- âœ… `useUploadFlow.ts` ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ

**íŒŒì¼ êµ¬ì¡°:**
```
lib/api/
â”œâ”€â”€ client.ts              # ê¸°ë³¸ HTTP í´ë¼ì´ì–¸íŠ¸
â”œâ”€â”€ edge-functions.ts      # Edge Functions í´ë¼ì´ì–¸íŠ¸
â”œâ”€â”€ index.ts               # í†µí•© export
â””â”€â”€ __tests__/
    â”œâ”€â”€ client.test.ts     # 7ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼
    â””â”€â”€ edge-functions.test.ts  # 2ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼
```

---

#### 2. ì¸ì¦ ëª¨ë“ˆ í†µí•© (`lib/auth/`)
- âœ… `useAuth()` - ì‚¬ìš©ì ì •ë³´ ë° ì¸ì¦ ìƒíƒœ ê´€ë¦¬
- âœ… `useSession()` - ì„¸ì…˜ ê´€ë¦¬
- âœ… `useRequireAuth()` - ì¸ì¦ í•„ìˆ˜ í˜ì´ì§€ìš© í›…
- âœ… `AuthGuard` - ì¸ì¦ ê°€ë“œ ì»´í¬ë„ŒíŠ¸
- âœ… `getAccessToken()`, `getCurrentUser()`, `signOut()` ìœ í‹¸ë¦¬í‹°
- âœ… **í…ŒìŠ¤íŠ¸**: 5ê°œ í…ŒìŠ¤íŠ¸ ëª¨ë‘ í†µê³¼
- âœ… `home/page.tsx` ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ

**íŒŒì¼ êµ¬ì¡°:**
```
lib/auth/
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”œâ”€â”€ useSession.ts
â”‚   â””â”€â”€ useRequireAuth.ts
â”œâ”€â”€ guards/
â”‚   â””â”€â”€ AuthGuard.tsx
â”œâ”€â”€ utils.ts
â”œâ”€â”€ index.ts
â””â”€â”€ __tests__/
    â”œâ”€â”€ useAuth.test.ts    # 3ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼
    â””â”€â”€ useSession.test.ts # 2ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼
```

---

#### 3. ì—ëŸ¬ ì²˜ë¦¬ í†µí•© (`lib/error/`)
- âœ… `classifyError()` - ì—ëŸ¬ ë¶„ë¥˜ ê°œì„ 
- âœ… `getErrorMessage()` - ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€ ë³€í™˜
- âœ… `useErrorHandler()` - ì—ëŸ¬ ì²˜ë¦¬ í›…
- âœ… `ErrorBoundary` - React Error Boundary ì»´í¬ë„ŒíŠ¸
- âœ… `ERROR_MESSAGES` - ì—ëŸ¬ ë©”ì‹œì§€ ìƒìˆ˜í™”
- âœ… `retryWithBackoff()` - ì¬ì‹œë„ ìœ í‹¸ë¦¬í‹°
- âœ… **í…ŒìŠ¤íŠ¸**: 9ê°œ í…ŒìŠ¤íŠ¸ ëª¨ë‘ í†µê³¼
- âœ… `analyze/page.tsx` ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ

**íŒŒì¼ êµ¬ì¡°:**
```
lib/error/
â”œâ”€â”€ handler.ts             # ì—ëŸ¬ ë¶„ë¥˜ í•µì‹¬ ë¡œì§
â”œâ”€â”€ messages.ts            # ì—ëŸ¬ ë©”ì‹œì§€ ìƒìˆ˜
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useErrorHandler.ts
â”œâ”€â”€ components/
â”‚   â””â”€â”€ ErrorBoundary.tsx
â”œâ”€â”€ utils.ts               # ì¬ì‹œë„ ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ index.ts
â””â”€â”€ __tests__/
    â””â”€â”€ handler.test.ts    # 9ê°œ í…ŒìŠ¤íŠ¸ í†µê³¼
```

---

## ğŸ“Š í…ŒìŠ¤íŠ¸ í†µê³„

- **ì´ í…ŒìŠ¤íŠ¸**: 23ê°œ
- **í†µê³¼**: 23ê°œ âœ…
- **ì‹¤íŒ¨**: 0ê°œ
- **ì»¤ë²„ë¦¬ì§€**: ì£¼ìš” ê¸°ëŠ¥ ëª¨ë‘ í…ŒìŠ¤íŠ¸ ì™„ë£Œ

---

## ğŸ¯ ë‹¤ìŒ ì‘ì—… (ìš°ì„ ìˆœìœ„ 2)

### ìš°ì„ ìˆœìœ„ 2-1: ì´ë¯¸ì§€ ì²˜ë¦¬ í†µí•© (ì˜ˆì •)
- `lib/image/` ëª¨ë“ˆ ìƒì„±
- `useImageProcessor` í†µí•© í›…
- ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì¦ˆ, í’ˆì§ˆ ê²€ì‚¬, ê²€ì¦ í†µí•©

### ìš°ì„ ìˆœìœ„ 2-2: ë¶„ì„ í”Œë¡œìš° ëª¨ë“ˆí™” (ì˜ˆì •)
- `useUploadFlow.ts` ë¶„ë¦¬ (í˜„ì¬ 296ì¤„)
- `useImageUpload`, `useAnalysis`, `useAnalysisSave` ë¶„ë¦¬
- `useAnalysisFlow` ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ í›…

### ìš°ì„ ìˆœìœ„ 2-3: ë°ì´í„° í˜ì¹­ í†µí•© (ì˜ˆì •)
- `lib/data/queries/` - ì¿¼ë¦¬ ëª¨ìŒ
- `lib/data/mutations/` - ë®¤í…Œì´ì…˜ ëª¨ìŒ
- ìºì‹œ í‚¤ ìƒìˆ˜í™”

---

## ğŸ“ ë§ˆì´ê·¸ë ˆì´ì…˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì™„ë£Œëœ ë§ˆì´ê·¸ë ˆì´ì…˜
- [x] `useUploadFlow.ts` â†’ ìƒˆ API í´ë¼ì´ì–¸íŠ¸ ì‚¬ìš©
- [x] `home/page.tsx` â†’ `useAuth()` ì‚¬ìš©
- [x] `analyze/page.tsx` â†’ ìƒˆ ì—ëŸ¬ ì²˜ë¦¬ ëª¨ë“ˆ ì‚¬ìš©

### ë‚¨ì€ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] `profile/page.tsx` â†’ `useAuth()` ì‚¬ìš©
- [ ] `analysis/[id]/page.tsx` â†’ `useAuth()` ì‚¬ìš©
- [ ] `treatments/[id]/page.tsx` â†’ `useAuth()` ì‚¬ìš©
- [ ] ê¸°íƒ€ í˜ì´ì§€ë“¤ â†’ í†µí•© ëª¨ë“ˆ ì‚¬ìš©

---

## ğŸš€ ì„±ê³¼

1. **ì½”ë“œ ì¤‘ë³µ ì œê±°**: API í˜¸ì¶œ ë¡œì§ í†µí•©ìœ¼ë¡œ ~100ì¤„ ê°ì†Œ
2. **ì¼ê´€ì„± í–¥ìƒ**: ëª¨ë“  API í˜¸ì¶œì´ ë™ì¼í•œ ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ ì‚¬ìš©
3. **í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±**: ê° ëª¨ë“ˆì´ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
4. **ì¬ì‚¬ìš©ì„±**: ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“ˆ êµ¬ì¡°

