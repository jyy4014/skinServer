---
alwaysApply: true
---

# AI 기반 피부 시술 추천 앱 MVP 기획 및 개발 프롬프트

## 🎯 프로젝트 개요
이 프로젝트는 사용자의 피부 사진을 분석하여 적합한 피부 시술(예: 레이저, 필링 등)을 추천하는 AI 기반 MVP 앱이다.  
의료 진단이 아닌 **뷰티 컨설팅 및 참고용 보조 도구**로 작동하며, 빠른 MVP 개발과 배포를 목표로 한다.

---

## ⚙️ 기술 스택
- **프런트엔드**: Next.js (React 기반, V0 디자인 이용)
- **백엔드**: Express.js (별도 프로젝트)
- **데이터베이스**: Supabase (인증, DB, Storage)
- **AI 모델**: OpenAI / Replicate / HuggingFace 기반 피부 분석 모델
- **스토리지**: Supabase Storage (사진 업로드)
- **배포**: Vercel (프런트) + Railway/Render (백엔드) + Supabase (백엔드)

---

## 🧩 주요 기능
1. **회원가입 및 로그인**
   - 이메일 또는 소셜 로그인 (Google)
   - 사용자 기본 프로필 저장 (이름, 생년월일, 성별 등)

2. **피부 사진 업로드 및 분석**
   - 사용자가 얼굴 사진 업로드
   - AI가 피부 상태(모공, 잡티, 여드름, 색소 등) 분석
   - 분석 결과 요약 및 추천 시술(예: 토닝, 프락셀, 리쥬란 등) 제시

3. **시술 정보 제공**
   - 각 시술의 효과, 시술 시간, 회복 기간, 주의사항 등 표시
   - 시술별 후기 요약 (AI 요약 기반)

4. **피부 상태 이력 관리**
   - 사진 및 분석 결과를 시간순으로 저장
   - 피부 개선 추이 시각화

5. **피부 목표 기반 추천**
   - "잡티 개선", "피부결 정돈", "홍조 완화" 등 목표 선택 시 최적 시술 추천

---

## 🧱 UI/UX 구성 (온보딩부터 메인까지)

### 1️⃣ 온보딩
- 3단계 스와이프 화면:
  1. AI가 피부를 분석해주는 설명
  2. 개인 맞춤 시술 추천 안내
  3. 개인정보 보호 및 의료 비진단 안내
- 마지막에 "시작하기" 버튼 → 로그인 화면 이동

### 2️⃣ 로그인 / 회원가입
- 이메일 및 비밀번호 방식 (기본값, 무료)
- 이메일 인증코드 방식 (선택사항, 비용 발생 가능)
- Google 로그인 버튼
- 로그인 후 → 메인 홈 이동
- **주의**: 이메일 인증코드는 Supabase 무료 플랜에서 비용이 발생할 수 있으므로, 개발/테스트 시에는 비밀번호 방식 사용 권장

### 3️⃣ 홈 화면
- 상단: "오늘의 피부 분석하기" 버튼
- 중간: 최근 분석 결과 미리보기
- 하단: 추천 시술 리스트(가로 스크롤)

### 4️⃣ 분석 화면
- "사진 업로드" 버튼 (카메라 또는 앨범)
- 업로드 후 → AI 분석 로딩 화면
- 결과 표시:
  - 주요 문제 요약
  - 추천 시술 3개
  - "시술 정보 보기" 버튼

### 5️⃣ 시술 상세 화면
- 시술명, 효과, 예상 비용, 소요 시간
- AI가 생성한 요약 설명
- 관련 후기 섹션 (간략 리뷰 표시)

### 6️⃣ 마이페이지
- 사용자 프로필 정보
- 과거 분석 기록 목록
- 계정 설정 및 로그아웃

---

## 🗂️ 데이터베이스 구조 (Supabase)

### 📘 users
| 필드명 | 타입 | 설명 |
|--------|------|------|
| id | uuid | 사용자 고유 ID |
| email | text | 이메일 |
| name | text | 이름 |
| birth_date | date | 생년월일 |
| gender | text | 성별 |
| created_at | timestamp | 생성일 |

### 📘 skin_analysis
| 필드명 | 타입 | 설명 |
|--------|------|------|
| id | uuid | 고유 ID |
| user_id | uuid | 사용자 ID |
| image_url | text | 분석 이미지 경로 |
| result_summary | text | 요약 결과 |
| recommended_treatments | jsonb | 추천 시술 리스트 |
| created_at | timestamp | 생성일 |

### 📘 treatments
| 필드명 | 타입 | 설명 |
|--------|------|------|
| id | uuid | 고유 ID |
| name | text | 시술명 |
| description | text | 설명 |
| benefits | text | 효과 |
| cost | numeric | 평균 비용 |
| recovery_time | text | 회복기간 |
| risk_level | text | 위험도 |
| created_at | timestamp | 생성일 |

---

## 🔗 API 설계

### [POST] `/api/analyze`
**설명:** 피부 사진을 업로드하고 AI 분석 결과 반환  
**입력:** `image_url`, `user_id`, `access_token`  
**출력:**
```json
{
  "status": "success",
  "summary": "피부 결이 고르지 않고 잡티가 있음",
  "recommendations": [
    { "name": "프락셀 레이저", "reason": "모공 및 잡티 개선" },
    { "name": "토닝", "reason": "피부톤 균일화" }
  ]
}
```

### [POST] `/api/analyze/save`
**설명:** 분석 결과를 데이터베이스에 저장  
**입력:** `user_id`, `image_url`, `result_summary`, `analysis_data`, `recommended_treatments`, `access_token`

---

## ⚡ 백엔드 로직 (Express.js 서버)

1. 이미지 업로드 → Supabase Storage (프론트엔드에서 처리)
2. 업로드 완료 시 백엔드 API로 AI 모델 호출
3. 모델 결과를 분석 후 DB 저장
4. 결과 JSON 응답 반환

---

## 🧠 AI 분석 로직 (예시)
- 입력: 얼굴 이미지 URL
- 처리:
  - 피부 결, 모공, 잡티, 여드름, 주름 영역 탐지
  - 각 요소에 점수 부여 (0~100)
- 출력:
  ```json
  {
    "pores": 70,
    "acne": 40,
    "tone": 85,
    "spots": 60,
    "summary": "모공이 다소 넓고 잡티가 존재함",
    "recommendations": ["프락셀", "토닝"]
  }
  ```

---

## 🚀 MVP 목표
- **기간:** 2주
- **핵심 목표:** 피부 사진 업로드 → 분석 결과 → 추천 시술 표시
- **비의료적 보조 도구**로 명시하여 법적 리스크 최소화

---

## 🔒 법률 및 정책 고려사항
- "의료 진단이 아닌 참고용 뷰티 분석 도구"라는 문구 명시
- 개인정보 보호: 사진은 암호화 저장, 삭제 가능
- 모델은 질병 진단을 하지 않음 (레이저 추천은 미용 목적만)

---

## 🧰 향후 확장 계획
- 사용자의 피부 타입별 맞춤 루틴 추천
- 병원 예약 연동 기능 (제휴)
- AI 시술 후기 요약 시스템 추가
- 피부 개선 시각화 (그래프)

---

## 📁 프로젝트 구조

### 프론트엔드 (Next.js)
```
app/
├── auth/              # 인증 페이지
├── onboarding/        # 온보딩
├── home/              # 홈 화면
├── analyze/           # 분석 화면
├── analysis/[id]/     # 분석 결과 상세
├── treatments/[id]/    # 시술 상세
└── profile/            # 마이페이지
```

### 백엔드 (Express.js)
```
backend/
├── src/
│   ├── routes/         # API 라우트
│   ├── services/       # 비즈니스 로직
│   └── config/         # 설정
└── package.json
```

---

## 🛠 개발 규칙

1. **프론트엔드와 백엔드는 별도 프로젝트로 분리**
   - 프론트엔드: Next.js (포트 3000)
   - 백엔드: Express.js (포트 3001)

2. **API 통신**
   - 프론트엔드는 백엔드 API를 호출
   - 인증 토큰은 Authorization 헤더로 전달

3. **환경 변수**
   - 프론트엔드: `.env.local` (NEXT_PUBLIC_*)
   - 백엔드: `.env` (서버 전용)

4. **코드 스타일**
   - TypeScript 사용
   - ESLint 규칙 준수
   - 함수형 컴포넌트 사용 (React)

5. **에러 처리**
   - 모든 API 호출에 try-catch 적용
   - 사용자 친화적인 에러 메시지 표시

6. **비용 최적화 (무료 플랜 고려)**
   - 기본 인증 방식: 비밀번호 방식 (무료)
   - 이메일 인증코드: 선택사항 (비용 발생 가능)
   - 개발/테스트 시 비밀번호 방식 사용 권장
   - 프로덕션에서만 실제 사용자에게 이메일 인증코드 발송

⚖️ 의료보조 앱 법적 면책 문구 템플릿 (한국 기준)
① 앱의 법적 성격 명시
본 서비스는 의료행위 또는 전문적 진단을 대체하지 않습니다.
AI 분석 결과는 참고용 정보이며, 정확한 진단이나 치료를 위해서는 반드시 전문 의료인의 상담이 필요합니다.
② 결과 페이지(리포트 화면) 하단
※ 이 결과는 사용자의 피부 상태를 기반으로 한 일반적인 정보 제공용 분석이며,
   특정 시술, 약물, 치료를 권유하거나 처방하는 내용이 아닙니다.
③ 회원가입/로그인 시 이용약관 요약
본 서비스는 인공지능을 활용한 피부 분석 보조 도구이며, 의료 행위 또는 진단 서비스를 제공하지 않습니다.
서비스 이용자는 본 앱의 결과를 의료적 판단의 근거로 사용하지 않아야 합니다.
④ 개인정보 처리 관련 문구
사용자의 이미지와 분석 데이터는 익명화되어 저장되며,
AI 모델 학습용으로 재사용되지 않습니다.
이미지는 사용자가 삭제 요청 시 즉시 파기됩니다.
⑤ AI 결과 표시 시 권장 문구
AI 분석 결과: "일반적인 피부 특성 분석"
추천 항목은 참고용이며, 의료 전문가의 진단을 대체하지 않습니다.