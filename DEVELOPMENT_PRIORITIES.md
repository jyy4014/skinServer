# 개발 우선순위 로드맵

## 📊 현재 상태 요약

### ✅ 완료된 기능
1. **인증 시스템**
   - ✅ 회원가입 (Edge Function 기반, 서버 검증)
   - ✅ 로그인 (이메일/비밀번호, Google OAuth)
   - ✅ 프로필 완성도 기능
   - ✅ 프로필 편집

2. **UI/UX 기본 구조**
   - ✅ 온보딩 화면 (4단계)
   - ✅ 홈 화면 (분석 CTA, 최근 결과, 추천 시술)
   - ✅ 분석 화면 (이미지 업로드, 미리보기)
   - ✅ 분석 결과 상세 화면
   - ✅ 히스토리 화면
   - ✅ 시술 상세 화면
   - ✅ 프로필 화면

3. **백엔드 인프라**
   - ✅ Supabase 데이터베이스 스키마
   - ✅ Edge Functions 구조 (analyze, signup)
   - ✅ 3단계 AI 파이프라인 구조 (stageA, stageB, stageC)
   - ✅ 이미지 업로드 (Supabase Storage)

4. **코드 품질**
   - ✅ TypeScript 타입 정의
   - ✅ React Query 상태 관리
   - ✅ 에러 처리 및 분류
   - ✅ 접근성 (A11y) 개선

---

## 🎯 개발 우선순위 (MVP → 확장)

### 🔥 **P0: 핵심 기능 완성 (1-2주)**

#### 1. AI 분석 파이프라인 완성 ⭐ **최우선**
**목표**: 실제 AI 모델 연동하여 피부 분석 결과 생성

**작업 내용**:
- [ ] **Stage A (Vision AI)**: 실제 Vision 모델 연동
  - OpenAI Vision API 또는 Replicate/HuggingFace 모델 선택
  - 피부 상태 점수 산출 (pigmentation, acne, redness, pores, wrinkles)
  - 마스크/히트맵 생성
  - 신뢰도 및 불확실성 추정
  
- [ ] **Stage B (Mapping AI)**: 문제 → 시술 매핑 로직 완성
  - 룰 기반 필터 (안전성 검증)
  - 통계 기반 가중치 계산
  - 시술 후보 점수 산출 및 순위 결정
  
- [ ] **Stage C (NLG AI)**: 사용자 친화적 문구 생성
  - GPT 기반 설명 문구 생성
  - 비의료적 문구 강제 (금지어 필터링)
  - 법적 면책 문구 자동 삽입

**예상 시간**: 3-5일
**의존성**: 외부 AI API 키 설정

---

#### 2. 이미지 업로드 플로우 개선
**목표**: 안정적이고 사용자 친화적인 업로드 경험

**작업 내용**:
- [ ] 클라이언트 사이드 이미지 전처리 (리사이즈, WebP 변환)
- [ ] 업로드 진행도 표시 (진행률 바)
- [ ] 이미지 품질 검증 (Laplacian blur check)
- [ ] 다중 각도 촬영 가이드 UI 개선
- [ ] 에러 처리 및 재시도 로직 강화

**예상 시간**: 2-3일

---

#### 3. 분석 결과 화면 개선
**목표**: 분석 결과를 명확하고 신뢰성 있게 표시

**작업 내용**:
- [ ] 히트맵 오버레이 표시/숨김 토글
- [ ] 피부 상태 점수 시각화 (막대 그래프, 레이더 차트)
- [ ] 추천 시술 카드 UI 개선
- [ ] 결과 저장 및 히스토리 연동 확인

**예상 시간**: 2일

---

### 🟡 **P1: 사용자 경험 개선 (2-3주)**

#### 4. 히스토리 화면 기능 강화
**목표**: 사용자가 피부 개선 추이를 시각적으로 확인

**작업 내용**:
- [ ] Before/After 비교 기능
- [ ] 시간별 추이 그래프 (주간/월간)
- [ ] 개선 지표 요약 (AI 생성)
- [ ] 분석 기록 필터링 및 정렬

**예상 시간**: 3-4일

---

#### 5. 시술 상세 화면 개선
**목표**: 추천 시술에 대한 상세 정보 제공

**작업 내용**:
- [ ] 시술 효과, 비용, 회복 기간 표시
- [ ] AI 생성 설명 문구 표시
- [ ] 관련 후기 요약 (향후 확장)
- [ ] "관심 등록" 기능 (MVP 제외 가능)

**예상 시간**: 2일

---

#### 6. 디자인 시스템 정리
**목표**: 일관된 UI/UX 및 빠른 개발

**작업 내용**:
- [ ] Design Tokens 정리 (색상, 폰트, 간격)
- [ ] 공통 컴포넌트 라이브러리 확장
  - Button, Input, Card, Modal, Toast 등
- [ ] 다크모드 지원 (선택사항)
- [ ] 반응형 디자인 개선

**예상 시간**: 3-4일

---

### 🟢 **P2: 품질 및 안정성 (3-4주)**

#### 7. 테스트 커버리지 확대
**목표**: 안정적인 배포 및 유지보수

**작업 내용**:
- [ ] Unit 테스트 (핵심 로직)
- [ ] Integration 테스트 (API 연동)
- [ ] E2E 테스트 (Playwright)
  - 회원가입 → 분석 → 결과 확인 플로우
- [ ] CI/CD 파이프라인 구축

**예상 시간**: 4-5일

---

#### 8. 에러 처리 및 모니터링
**목표**: 프로덕션 레벨 에러 처리

**작업 내용**:
- [ ] Sentry 연동 (에러 추적)
- [ ] 사용자 친화적 에러 메시지
- [ ] 재시도 로직 개선 (exponential backoff)
- [ ] 로깅 및 분석 이벤트 추가

**예상 시간**: 2-3일

---

#### 9. 성능 최적화
**목표**: 빠른 로딩 및 부드러운 UX

**작업 내용**:
- [ ] 이미지 최적화 (lazy loading, WebP)
- [ ] 코드 스플리팅
- [ ] API 응답 캐싱 (React Query)
- [ ] 번들 크기 최적화

**예상 시간**: 2-3일

---

### 🔵 **P3: 확장 기능 (4주+)**

#### 10. 온보딩 개선
**목표**: 첫 사용자 경험 향상

**작업 내용**:
- [ ] 촬영 가이드 이미지 추가
- [ ] 품질 체크 가이드
- [ ] 튜토리얼 오버레이

**예상 시간**: 2일

---

#### 11. 알림 시스템
**목표**: 사용자 재방문 유도

**작업 내용**:
- [ ] 이메일 알림 (분석 완료, 추천 시술)
- [ ] 브라우저 푸시 알림 (선택사항)
- [ ] 알림 설정 페이지

**예상 시간**: 3-4일

---

#### 12. 다국어 지원 (i18n)
**목표**: 글로벌 확장 준비

**작업 내용**:
- [ ] i18n 라이브러리 도입
- [ ] 한국어/영어 번역
- [ ] 언어 선택 기능

**예상 시간**: 3-4일

---

## 📅 권장 개발 일정

### Week 1-2: P0 완성
- AI 분석 파이프라인 완성
- 이미지 업로드 플로우 개선
- 분석 결과 화면 개선

### Week 3-4: P1 완성
- 히스토리 화면 강화
- 시술 상세 화면 개선
- 디자인 시스템 정리

### Week 5-6: P2 완성
- 테스트 커버리지 확대
- 에러 처리 및 모니터링
- 성능 최적화

### Week 7+: P3 확장
- 온보딩 개선
- 알림 시스템
- 다국어 지원

---

## 🎯 MVP 출시 기준

다음 항목이 완료되면 MVP 출시 가능:

1. ✅ 회원가입/로그인
2. ✅ 이미지 업로드 및 분석
3. ✅ AI 분석 결과 표시 (3단계 파이프라인)
4. ✅ 추천 시술 표시
5. ✅ 기본 히스토리 조회
6. ⚠️ 에러 처리 기본 구현
7. ⚠️ 법적 면책 문구 표시

**현재 진행률**: 약 70% 완료

---

## 💡 즉시 시작 가능한 작업

### 오늘 바로 시작할 수 있는 것:
1. **AI 분석 파이프라인 완성** (최우선)
   - Stage A Vision API 연동
   - Stage B 매핑 로직 구현
   - Stage C NLG 프롬프트 최적화

2. **이미지 업로드 개선**
   - 클라이언트 리사이즈 로직
   - 진행도 표시

3. **디자인 시스템 정리**
   - Design Tokens 파일 정리
   - 공통 컴포넌트 확장

---

## 📝 참고사항

- **비용 고려**: AI API 호출 비용 (OpenAI, Replicate 등)
- **법적 고려**: 의료 진단 금지, 면책 문구 필수
- **보안**: 이미지 암호화, 개인정보 보호
- **확장성**: 향후 마이크로서비스 전환 고려

---

**다음 단계**: P0 항목 중 **AI 분석 파이프라인 완성**부터 시작 권장

